(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{32:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(1),i=n(20),a=n.n(i),s=n(12),o=n(13),j=n(35),l=n(11),d=n(29),u="ADD_IMG_TO_HISTORY",O="DELETE_IMG_FROM_HISTORY",b="SET_ERROR",h="SET_LOADING",g={imgs:[],loading:!0,isError:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var n=[t.payload].concat(Object(d.a)(e.imgs));return console.log(n),Object(l.a)(Object(l.a)({},e),{},{imgs:n,loading:!1});case O:var c=Object(d.a)(e.imgs);return c.splice(t.payload,1),Object(l.a)(Object(l.a)({},e),{},{imgs:c,loading:!c.length});case b:return console.log(t.payload),Object(l.a)(Object(l.a)({},e),{},{loading:!1,isError:!0});case h:return Object(l.a)(Object(l.a)({},e),{},{loading:!0,isError:!1});default:return e}},m=n(19),p=n.n(m),x=n(14),v=p.a.mark(_),E=p.a.mark(y);function _(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(x.b)({type:"SET_LOADING"}),t.next=4,Object(x.a)((function(){return fetch("https://api.giphy.com/v1/gifs/random?api_key=gR30u9O8KPOanwIQupHbD90d4k57EOeY")}));case 4:return e=t.sent,t.next=7,Object(x.a)((function(){return e.json()}));case 7:return e=t.sent,t.next=10,Object(x.b)({type:"ADD_IMG_TO_HISTORY",payload:{url:e.data.image_url,date:(new Date).toLocaleString(),id:e.data.id+1e5*Math.random().toFixed(5),title:e.data.title}});case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(0),t.next=16,Object(x.b)({type:"SET_ERROR",err:t.t0});case 16:case"end":return t.stop()}}),v,null,[[0,12]])}function y(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.c)("FETCH_IMG",_);case 2:case"end":return e.stop()}}),E)}var I=n(18),w=(n(46),function(){return Object(c.jsx)("nav",{className:"navBar",children:Object(c.jsxs)("div",{children:[Object(c.jsx)(I.b,{to:"/",children:"Main"}),Object(c.jsx)(I.b,{to:"/history",children:"History"})]})})}),T=n(6),R=(n(48),function(e){var t=e.img,n=e.withInfo?Object(c.jsxs)("div",{className:"info",children:[Object(c.jsxs)("div",{children:["Title: ",t.title||"no data"]}),Object(c.jsxs)("div",{children:["Loaded:",t.date]})]}):null;return Object(c.jsxs)("div",{className:"wrapper",children:[n,Object(c.jsx)("div",{className:"picture",children:Object(c.jsx)("img",{src:t.url,alt:""})})]})}),S=(n(32),Object(s.b)((function(e){return{img:e.imgs[0],loading:e.loading}}),(function(e){return{fetchImg:function(){return e({type:"FETCH_IMG"})}}}))((function(e){Object(r.useEffect)((function(){e.loading&&e.fetchImg()}),[]);var t=e.loading?Object(c.jsx)("h3",{children:"loading"}):Object(c.jsx)(R,{img:e.img});return console.log(e.loading),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"wrapper",children:t}),Object(c.jsx)("button",{onClick:function(){return e.fetchImg()},children:"Refresh"})]})}))),D=n(30),H=n(34),M=Object(s.b)((function(e){return{imgs:e.imgs}}),(function(e){return{delImgFromHistory:function(t){return e(function(e){return{type:"DELETE_IMG_FROM_HISTORY",payload:e}}(t))}}}))((function(e){var t=e.imgs,n=e.delImgFromHistory,i=Object(r.useState)(!0),a=Object(D.a)(i,2),s=a[0],o=a[1],j=Object(r.useState)(1),l=Object(D.a)(j,2),d=l[0],u=l[1],O=t.slice(0,5*d);if(!t.length)return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{children:"History is empty, please return to main page."})});return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)(H.a,{dataLength:O.length,hasMore:s,next:function(){O.length!==t.length?u(d+1):o(!1)},children:O.map((function(e,t){return Object(c.jsxs)("div",{className:"img__container",children:[Object(c.jsx)(R,{withInfo:!0,img:e}),Object(c.jsx)("button",{onClick:function(){return n(t)},children:"Delete"})]},e.id)}))})})})),N=Object(s.b)((function(e){return{isError:e.isError}}))((function(e){return e.isError?Object(c.jsx)("div",{children:"Something went wrong..."}):Object(c.jsx)(c.Fragment,{children:e.children})})),k=function(){return Object(c.jsxs)(I.a,{children:[Object(c.jsx)(w,{}),Object(c.jsxs)(T.c,{children:[Object(c.jsx)(T.a,{path:"/",exact:!0,children:Object(c.jsx)(N,{children:Object(c.jsx)(S,{})})}),Object(c.jsx)(T.a,{path:"/history",children:Object(c.jsx)(M,{})})]})]})},F=(n(49),Object(j.a)()),G=Object(o.d)(f,Object(o.a)(F));F.run(y),a.a.render(Object(c.jsx)(s.a,{store:G,children:Object(c.jsx)(k,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.e92077a3.chunk.js.map