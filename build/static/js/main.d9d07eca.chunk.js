(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{24:function(t,e,r){},33:function(t,e,r){},34:function(t,e,r){},41:function(t,e,r){},42:function(t,e,r){"use strict";r.r(e);var n=r(1),c=r(0),i=r.n(c),s=r(14),a=r.n(s),u=(r(33),r(11)),o=(r(34),function(){return Object(n.jsx)("nav",{className:"navBar",children:Object(n.jsxs)("div",{children:[Object(n.jsx)(u.b,{to:"/",children:"Main"}),Object(n.jsx)(u.b,{to:"/history",children:"History"})]})})}),j=r(3),l=r(8),d=r(21),g=r.n(d),b=r(26),O=function(t){return{type:"ADD_IMG_TO_HISTORY",data:{url:t.data.image_url,date:(new Date).toLocaleString(),id:t.data.id+1e5*Math.random().toFixed(5),title:t.data.title}}},m=function(){return{type:"SET_ERROR"}},h=function(){return{type:"SET_LOADING"}},f=(r(24),Object(l.b)((function(t){return{img:t.imgs[t.imgs.length-1],loading:t.loading}}),(function(t){return{refreshImg:function(){return t(function(){var t=Object(b.a)(g.a.mark((function t(e){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(h),t.next=4,fetch("https://api.giphy.com/v1/gifs/random?api_key=gR30u9O8KPOanwIQupHbD90d4k57EOeY");case 4:if(!(r=t.sent).ok){t.next=12;break}return t.next=8,r.json();case 8:r=t.sent,e(O(r)),t.next=13;break;case 12:throw new Error;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),e(m());case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}())}}}))((function(t){Object(c.useEffect)((function(){t.loading&&t.refreshImg()}),[]);var e=t.loading?Object(n.jsx)("h3",{children:"loading"}):Object(n.jsx)("img",{src:t.img.url,alt:"placeholder"});return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"wrapper",children:e}),Object(n.jsx)("button",{onClick:function(){return t.refreshImg()},children:"Refresh"})]})}))),I=(r(41),Object(l.b)((function(t){return{imgs:t.imgs,currentHistImg:t.currentHistImg}}),(function(t){return{switchActiveImg:function(e){return t(function(t){return{type:"SWITCH_ACTIVE_IMG",payload:t}}(e))},switchForward:function(){return t({type:"SWITCH_FORWARD"})},switchBack:function(){return t({type:"SWITCH_BACK"})}}}))((function(t){return Object(n.jsxs)("div",{className:"pagBar",children:[Object(n.jsx)("div",{className:"arrow",onClick:t.switchBack,children:"Prev"}),t.imgs.map((function(e,r){return Object(n.jsx)("div",{onClick:function(){return t.switchActiveImg(r)},className:r===t.currentHistImg?"active":"",children:r+1},e.id)})),Object(n.jsx)("div",{className:"arrow",onClick:t.switchForward,children:"Next"})]})}))),x=Object(l.b)((function(t){return{img:t.imgs[t.currentHistImg]}}))((function(t){return Object(n.jsxs)("div",{className:"info",children:[Object(n.jsxs)("div",{children:["Title: ",t.img.title||"no data"]}),Object(n.jsxs)("div",{children:["Loaded:",t.img.date]})]})})),p=Object(l.b)((function(t){return{img:t.imgs[t.currentHistImg]}}),(function(t){return{delImgFromHistory:function(){return t({type:"DELETE_IMG_FROM_HISTORY"})}}}))((function(t){var e=t.img,r=e?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(x,{}),Object(n.jsx)("div",{className:"wrapper",children:Object(n.jsx)("img",{src:e.url,alt:""})}),Object(n.jsx)(I,{}),Object(n.jsx)("button",{onClick:t.delImgFromHistory,children:"Delete"})]}):Object(n.jsx)("div",{children:"History is unavailable, please return to main page."});return Object(n.jsx)("div",{className:"container",children:r})})),v=Object(l.b)((function(t){return{isError:t.isError}}))((function(t){return t.isError?Object(n.jsx)("div",{children:"Something went wrong..."}):Object(n.jsx)(n.Fragment,{children:t.children})})),H=function(){return Object(n.jsxs)(u.a,{children:[Object(n.jsx)(o,{}),Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{path:"/",exact:!0,children:Object(n.jsx)(v,{children:Object(n.jsx)(f,{})})}),Object(n.jsx)(j.a,{path:"/history",children:Object(n.jsx)(p,{})})]})]})},_=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,43)).then((function(e){var r=e.getCLS,n=e.getFID,c=e.getFCP,i=e.getLCP,s=e.getTTFB;r(t),n(t),c(t),i(t),s(t)}))},E=r(13),w=r(27),T=r(4),y=r(22),C="ADD_IMG_TO_HISTORY",R="DELETE_IMG_FROM_HISTORY",S="SWITCH_ACTIVE_IMG",k="SWITCH_FORWARD",F="SWITCH_BACK",D="SET_ERROR",N="SET_LOADING",A={imgs:[],currentHistImg:0,loading:!0,isError:!1},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case C:var r=[].concat(Object(y.a)(t.imgs),[e.data]);return console.log(r),Object(T.a)(Object(T.a)({},t),{},{imgs:r,loading:!1});case R:if(t.imgs.length>1){var n=Object(y.a)(t.imgs),c=0===t.currentHistImg?0:t.currentHistImg-1;return n.splice(t.currentHistImg,1),console.log(n,c),Object(T.a)(Object(T.a)({},t),{},{imgs:n,currentHistImg:c})}return t;case S:return Object(T.a)(Object(T.a)({},t),{},{currentHistImg:e.payload});case k:var i=t.currentHistImg===t.imgs.length-1?t.currentHistImg:t.currentHistImg+1;return Object(T.a)(Object(T.a)({},t),{},{currentHistImg:i});case F:var s=0===t.currentHistImg?t.currentHistImg:t.currentHistImg-1;return Object(T.a)(Object(T.a)({},t),{},{currentHistImg:s});case D:return Object(T.a)(Object(T.a)({},t),{},{loading:!1,isError:!0});case N:return Object(T.a)(Object(T.a)({},t),{},{loading:!0,isError:!1});default:return t}},B=Object(E.c)(M,Object(E.a)(w.a));a.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(l.a,{store:B,children:Object(n.jsx)(H,{})})}),document.getElementById("root")),_()}},[[42,1,2]]]);
//# sourceMappingURL=main.d9d07eca.chunk.js.map