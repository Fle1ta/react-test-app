{"version":3,"sources":["components/header/index.js","components/header/header.js","redux/actions/actions.js","components/pages/mainPage/index.js","components/pages/mainPage/mainPage.js","components/pagBar/index.js","components/pagBar/pagBar.js","components/infoBlock/index.js","components/infoBlock/infoBlock.js","components/pages/historyPage/index.js","components/pages/historyPage/historyPage.js","components/ErrorBoundary/index.js","components/ErrorBoundary/ErrorBoundary.js","components/app/index.js","components/app/app.js","reportWebVitals.js","redux/actions/actionsTypes.js","redux/reducer.js","index.js"],"names":["Header","className","to","addImgToHistory","res","type","data","url","image_url","date","Date","toLocaleString","id","Math","random","toFixed","title","setError","setLoading","MainPage","connect","state","img","imgs","length","loading","dispatch","refreshImg","a","fetch","ok","json","Error","props","useEffect","content","src","alt","onClick","PagBar","currentHistImg","switchActiveImg","index","payload","switchForward","switchBack","map","item","InfoBlock","HistoryPage","delImgFromHistory","ErrorBoundary","isError","children","App","path","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","reducer","action","newImgArray","console","log","newDelImgArray","newCurrent","splice","forvadImg","backImg","store","createStore","applyMiddleware","reduxThunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d9d07eca.chunk.js","sourcesContent":["import Header from './header';\r\nexport default Header;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./header.css\";\r\n\r\nconst Header = () => {\r\n    return (\r\n        <nav className=\"navBar\">\r\n            <div>\r\n                <Link to=\"/\">Main</Link>\r\n                <Link to=\"/history\">History</Link>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Header;","\r\nexport const addImgToHistory = (res) => {\r\n    return {\r\n        type: \"ADD_IMG_TO_HISTORY\",\r\n        data: {\r\n            url: res.data.image_url,\r\n            date: new Date().toLocaleString(),\r\n            id: res.data.id + (Math.random().toFixed(5)*100000),\r\n            title: res.data.title\r\n        }\r\n    }\r\n}\r\n\r\nexport const refreshImg = () => {\r\n    return async (dispatch) => {\r\n        try{\r\n            dispatch(setLoading);\r\n            let res = await fetch('https://api.giphy.com/v1/gifs/random?api_key=gR30u9O8KPOanwIQupHbD90d4k57EOeY')\r\n            if(res.ok) {res = await res.json();\r\n                dispatch(addImgToHistory(res));\r\n            } else {\r\n                throw new Error();\r\n            }\r\n        } catch(err){\r\n            dispatch(setError());\r\n        }\r\n                \r\n    }\r\n}\r\n\r\nexport const delImgFromHistory = () => {\r\n    return {\r\n        type: \"DELETE_IMG_FROM_HISTORY\",\r\n    }\r\n}\r\n\r\nexport const switchActiveImg = (index) => {\r\n    return {\r\n        type: \"SWITCH_ACTIVE_IMG\",\r\n        payload: index\r\n    }\r\n}\r\n\r\nexport const switchForward = () => {\r\n    return {\r\n        type: \"SWITCH_FORWARD\"\r\n    }\r\n}\r\n\r\nexport const switchBack = () => {\r\n    return {\r\n        type: \"SWITCH_BACK\"\r\n    }\r\n}\r\n\r\nexport const setError = () => {\r\n    return {\r\n        type: \"SET_ERROR\"\r\n    }\r\n}\r\n\r\nexport const setLoading = () => {\r\n    return {\r\n        type: \"SET_LOADING\"\r\n    }\r\n}","import MainPage from './mainPage';\r\nexport default MainPage;","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { refreshImg } from \"../../../redux/actions/actions\";\r\nimport '../Page.css';\r\n\r\n\r\nconst MainPage = (props) => {\r\n\r\n    useEffect(() => {\r\n        if(props.loading){\r\n            props.refreshImg();\r\n        }\r\n    }, []);\r\n\r\n    let content = props.loading ? (<h3>loading</h3>) : (<img src={props.img.url} alt='placeholder' />)  \r\n\r\n\r\n    return (\r\n            <div className=\"container\">\r\n                <div className=\"wrapper\">\r\n                    { content }\r\n                </div>\r\n                \r\n                <button onClick = { () => props.refreshImg()}>Refresh</button>\r\n            </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        img: state.imgs[state.imgs.length - 1],\r\n        loading: state.loading\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        refreshImg: () => dispatch(refreshImg())\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainPage);","import PagBar from './pagBar';\r\nexport default PagBar;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { switchActiveImg, switchForward, switchBack } from \"../../redux/actions/actions\";\r\nimport './pagBar.css'\r\n\r\n\r\nconst PagBar = (props) => {\r\n\r\n    \r\n    return <div className='pagBar'>\r\n        <div className='arrow' onClick={props.switchBack}>Prev</div>\r\n        { \r\n            props.imgs.map((item, index) => <div \r\n                                                key={item.id}\r\n                                                onClick={() => props.switchActiveImg(index)}\r\n                                                className = {(index === props.currentHistImg) ? \"active\" : \"\"} \r\n                                            >{index+1}</div>)\r\n        }\r\n        <div className='arrow' onClick={props.switchForward}>Next</div>\r\n    </div>\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        imgs: state.imgs,\r\n        currentHistImg: state.currentHistImg\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        switchActiveImg: index => dispatch(switchActiveImg(index)),\r\n        switchForward: () => dispatch(switchForward()),\r\n        switchBack: () => dispatch(switchBack()),\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PagBar);","import InfoBlock from './infoBlock';\r\nexport default InfoBlock;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nconst InfoBlock = (props) => {\r\n    return (<div className='info'>\r\n                <div>Title: {props.img.title || \"no data\"}</div>\r\n                <div>Loaded:{props.img.date}</div>\r\n            </div>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        img: state.imgs[state.currentHistImg], \r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(InfoBlock);","import HistoryPage from './historyPage';\r\nexport default HistoryPage;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { delImgFromHistory } from \"../../../redux/actions/actions\";\r\nimport '../Page.css';\r\nimport PagBar from '../../pagBar';\r\nimport InfoBlock from \"../../infoBlock\";\r\n\r\nconst HistoryPage = (props) => {\r\n    let img = props.img;\r\n    let content = !img ? (<div>History is unavailable, please return to main page.</div>) : (<>\r\n                                                            <InfoBlock/>\r\n                                                            <div className='wrapper'>\r\n                                                                <img src={img.url} alt=\"\"/>\r\n                                                            </div>\r\n                                                            <PagBar />\r\n                                                            <button onClick = { props.delImgFromHistory }>Delete</button>\r\n                                                        </>); \r\n\r\n    return (\r\n        <div className='container'>\r\n            { content }\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        img: state.imgs[state.currentHistImg],\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        delImgFromHistory: () => dispatch(delImgFromHistory())\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HistoryPage);\r\n","import ErrorBoundary from './ErrorBoundary';\r\nexport default ErrorBoundary;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nconst ErrorBoundary = (props) => {\r\n    if(props.isError){\r\n        return <div>Something went wrong...</div>\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {props.children}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isError: state.isError\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ErrorBoundary)","import App from './app';\r\nexport default App;","import React from 'react';\r\nimport Header from '../header/';\r\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom'; \r\nimport MainPage from '../pages/mainPage';\r\nimport HistoryPage from '../pages/historyPage';\r\nimport ErrorBoundary from \"../ErrorBoundary\"\r\n\r\n\r\nconst App = () => {\r\n    return  (\r\n\r\n        <Router>\r\n                <Header/>\r\n                <Switch>\r\n                    <Route path=\"/\" exact>\r\n                        <ErrorBoundary>\r\n                            <MainPage/>\r\n                        </ErrorBoundary>\r\n                    </Route>\r\n                    <Route path=\"/history\" >\r\n                        <HistoryPage/>\r\n                    </Route> \r\n                </Switch>\r\n        </Router>\r\n            \r\n    )\r\n}\r\n\r\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const refreshImg = \"REFRESH_IMG\";\r\nexport const addImgToHistory = \"ADD_IMG_TO_HISTORY\";\r\nexport const delImgFromHistory = \"DELETE_IMG_FROM_HISTORY\";\r\nexport const switchActiveImg = \"SWITCH_ACTIVE_IMG\";\r\nexport const switchForward = \"SWITCH_FORWARD\";\r\nexport const switchBack = \"SWITCH_BACK\";\r\nexport const setError = \"SET_ERROR\";\r\nexport const setLoading = \"SET_LOADING\";\r\n\r\n\r\n\r\n\r\n","import {addImgToHistory, \r\n        delImgFromHistory, \r\n        switchActiveImg,\r\n        switchForward,\r\n        switchBack,\r\n        setError,\r\n        setLoading\r\n    } from \"./actions/actionsTypes\"\r\n\r\nlet initialState = {\r\n    imgs: [],\r\n    currentHistImg: 0,\r\n    loading: true,\r\n    isError: false\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n\r\n        case addImgToHistory: \r\n            let newImgArray = [...state.imgs, action.data];\r\n            console.log(newImgArray);\r\n            return {\r\n                ...state,\r\n                imgs: newImgArray,\r\n                loading: false \r\n            }\r\n\r\n        case delImgFromHistory: \r\n            if(state.imgs.length > 1) {\r\n                let newDelImgArray =[...state.imgs];\r\n                let newCurrent = (state.currentHistImg === 0) ? 0 : state.currentHistImg-1;\r\n                newDelImgArray.splice(state.currentHistImg, 1);\r\n                console.log(newDelImgArray, newCurrent);\r\n                return {\r\n                    ...state,\r\n                    imgs: newDelImgArray,\r\n                    currentHistImg: newCurrent\r\n                }\r\n            } else {\r\n                return state\r\n        }\r\n\r\n        case switchActiveImg:\r\n            return {\r\n                ...state,\r\n                currentHistImg: action.payload\r\n            }\r\n        \r\n        case switchForward: \r\n            let forvadImg =  (state.currentHistImg === state.imgs.length-1) ? state.currentHistImg : state.currentHistImg + 1;\r\n            return {\r\n                ...state,\r\n                currentHistImg: forvadImg\r\n            }\r\n        case switchBack: \r\n            let backImg = (state.currentHistImg === 0) ? state.currentHistImg : state.currentHistImg - 1;\r\n            return {\r\n                ...state,\r\n                currentHistImg: backImg\r\n            }\r\n        \r\n        case setError: \r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                isError: true\r\n            }\r\n        \r\n        case setLoading: {\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                isError: false\r\n            }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app/';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport reduxThunk from 'redux-thunk';\nimport reducer from './redux/reducer';\n\nconst store = createStore(reducer, applyMiddleware(reduxThunk));\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Provider store={store}>\n\t\t\t<App />\n\t\t</Provider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}