{"version":3,"sources":["redux/actions/actionsTypes.js","redux/reducer.js","redux/sagas.js","redux/actions/actions.js","components/header/index.js","components/header/header.js","components/pictureBlock/index.js","components/pictureBlock/pictureBlock.js","components/pages/mainPage/index.js","components/pages/mainPage/mainPage.js","components/pages/historyPage/index.js","components/pages/historyPage/historyPage.js","components/ErrorBoundary/index.js","components/ErrorBoundary/ErrorBoundary.js","components/app/index.js","components/app/app.js","index.js"],"names":["addImgToHistory","delImgFromHistory","setError","setLoading","initialState","imgs","loading","isError","reducer","state","action","type","newImgArray","payload","console","log","newDelImgArray","splice","length","fetchImg","watchFetchData","put","call","fetch","data","json","url","image_url","date","Date","toLocaleString","id","Math","random","toFixed","title","err","takeEvery","Header","className","to","PictureBlock","img","infoBlock","withInfo","src","alt","MainPage","connect","dispatch","props","useEffect","content","onClick","HistoryPage","index","useState","hasMore","setHasMore","scrolledTimes","setScrolledTimes","shownImgs","slice","dataLength","next","map","ErrorBoundary","children","App","path","exact","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e92077a3.chunk.js","sourcesContent":["export const refreshImg = \"REFRESH_IMG\";\r\nexport const addImgToHistory = \"ADD_IMG_TO_HISTORY\";\r\nexport const delImgFromHistory = \"DELETE_IMG_FROM_HISTORY\";\r\nexport const setError = \"SET_ERROR\";\r\nexport const setLoading = \"SET_LOADING\";\r\nexport const fetchImg = \"FETCH_IMG\";\r\n\r\n\r\n\r\n\r\n\r\n","import {addImgToHistory, \r\n        delImgFromHistory,\r\n        setError,\r\n        setLoading,\r\n    } from \"./actions/actionsTypes\"\r\n\r\nlet initialState = {\r\n    imgs: [],\r\n    loading: true,\r\n    isError: false\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type){\r\n\r\n        case addImgToHistory: \r\n            let newImgArray = [action.payload, ...state.imgs];\r\n            console.log(newImgArray);\r\n            return {\r\n                ...state,\r\n                imgs: newImgArray,\r\n                loading: false \r\n            }\r\n\r\n        case delImgFromHistory: \r\n        {\r\n            let newDelImgArray =[...state.imgs];\r\n            newDelImgArray.splice(action.payload, 1);\r\n            return {\r\n                ...state,\r\n                imgs: newDelImgArray,\r\n                loading: newDelImgArray.length ? false : true\r\n            }  \r\n        }\r\n\r\n        case setError: \r\n        console.log(action.payload);\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                isError: true\r\n            }\r\n        \r\n        case setLoading: {\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                isError: false\r\n            }\r\n        }\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import { call, put, takeEvery } from 'redux-saga/effects';\r\nimport { setLoading } from './actions/actions';\r\n\r\nexport function* fetchImg(){\r\n    try{\r\n        put(setLoading());\r\n        let data = yield call(() => fetch('https://api.giphy.com/v1/gifs/random?api_key=gR30u9O8KPOanwIQupHbD90d4k57EOeY'));\r\n        data = yield call(() => data.json());\r\n        yield put({type: \"ADD_IMG_TO_HISTORY\", payload: {\r\n                                                            url: data.data.image_url,\r\n                                                            date: new Date().toLocaleString(),\r\n                                                            id: data.data.id + (Math.random().toFixed(5)*100000),\r\n                                                            title: data.data.title\r\n                                                        }});\r\n        \r\n    } catch(err){\r\n         yield put({type: \"SET_ERROR\", err})\r\n    }\r\n}\r\n\r\nexport function* watchFetchData() {\r\n    yield takeEvery('FETCH_IMG', fetchImg)\r\n  }","\r\n\r\nexport const addImgToHistory = () => {\r\n    return {\r\n        type: \"ADD_IMG_TO_HISTORY\",\r\n    }\r\n}\r\n\r\nexport const fetchImg = () => {\r\n    return { type: 'FETCH_IMG' }\r\n}\r\n\r\nexport const delImgFromHistory = (index) => {\r\n    return {\r\n        type: \"DELETE_IMG_FROM_HISTORY\",\r\n        payload: index\r\n    }\r\n}\r\n\r\nexport const setError = () => {\r\n    return {\r\n        type: \"SET_ERROR\"\r\n    }\r\n}\r\n\r\nexport const setLoading = () => {\r\n    return {\r\n        type: \"SET_LOADING\"\r\n    }\r\n}","import Header from './header';\r\nexport default Header;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./header.css\";\r\n\r\nconst Header = () => {\r\n    return (\r\n        <nav className=\"navBar\">\r\n            <div>\r\n                <Link to=\"/\">Main</Link>\r\n                <Link to=\"/history\">History</Link>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Header;","import PictureBlock from './pictureBlock';\r\nexport default PictureBlock;","import React from 'react';\r\nimport './pictureBlock.css';\r\n\r\nconst PictureBlock = ({img, withInfo}) => {\r\n\r\n    let infoBlock = withInfo ? (<div className='info'>\r\n                                    <div>Title: {img.title || \"no data\"}</div>\r\n                                    <div>Loaded:{img.date}</div>\r\n                                </div>) : null;\r\n\r\n    return (\r\n        <div className = 'wrapper'>\r\n            { infoBlock }\r\n            <div className='picture'>\r\n                <img src={img.url} alt=\"\"/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PictureBlock;","import MainPage from './mainPage';\r\nexport default MainPage;","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { fetchImg } from \"../../../redux/actions/actions\";\r\nimport PictureBlock from '../../pictureBlock';\r\nimport '../Page.css';\r\n\r\n\r\nconst MainPage = (props) => {\r\n\r\n    useEffect(() => {\r\n        if(props.loading){\r\n            props.fetchImg();\r\n        }\r\n    }, []);\r\n\r\n\r\n    let content = props.loading ? (<h3>loading</h3>) : (<PictureBlock img = {props.img}/>)  \r\n    console.log(props.loading);\r\n\r\n    return (\r\n            <div className=\"container\">\r\n                <div className=\"wrapper\">\r\n                    { content }\r\n                </div>\r\n                \r\n                <button onClick = { () => props.fetchImg()}>Refresh</button>\r\n            </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        img: state.imgs[0],\r\n        loading: state.loading\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        fetchImg: () => dispatch(fetchImg())\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainPage);","import HistoryPage from './historyPage';\r\nexport default HistoryPage;","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { delImgFromHistory } from '../../../redux/actions/actions';\r\nimport '../Page.css';\r\nimport PictureBlock from '../../pictureBlock';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\n\r\nconst HistoryPage = ({imgs, delImgFromHistory}) => {\r\n\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const [scrolledTimes, setScrolledTimes] = useState(1);\r\n\r\n    const shownImgs = imgs.slice(0, scrolledTimes * 5);\r\n\r\n    if(!imgs.length){\r\n        return (\r\n            <div className='container'>\r\n                <div>History is empty, please return to main page.</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const addMoreImgs = () => {\r\n        if( shownImgs.length === imgs.length) {\r\n            setHasMore(false);\r\n            return;\r\n        }\r\n        setScrolledTimes(scrolledTimes + 1);\r\n    }\r\n\r\n    return (\r\n        <div className='container'>\r\n            <InfiniteScroll\r\n                dataLength={ shownImgs.length }\r\n                hasMore={ hasMore }\r\n                next={ addMoreImgs }\r\n            >\r\n            { shownImgs.map((img, index) => {\r\n                return (\r\n                    <div className='img__container' key={ img.id }>\r\n                        <PictureBlock withInfo img = { img }/>\r\n                        <button onClick = { () => delImgFromHistory(index) }>Delete</button>\r\n                    </div>\r\n                )\r\n                \r\n            })}\r\n            </InfiniteScroll>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        imgs: state.imgs,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        delImgFromHistory: (index) => dispatch(delImgFromHistory(index))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HistoryPage);\r\n","import ErrorBoundary from './ErrorBoundary';\r\nexport default ErrorBoundary;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nconst ErrorBoundary = (props) => {\r\n    if(props.isError){\r\n        return <div>Something went wrong...</div>\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {props.children}\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isError: state.isError\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ErrorBoundary)","import App from './app';\r\nexport default App;","import React from 'react';\r\nimport Header from '../header/';\r\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom'; \r\nimport MainPage from '../pages/mainPage';\r\nimport HistoryPage from '../pages/historyPage';\r\nimport ErrorBoundary from \"../ErrorBoundary\"\r\n\r\n\r\nconst App = () => {\r\n    return  (\r\n\r\n        <Router>\r\n                <Header/>\r\n                <Switch>\r\n                    <Route path=\"/\" exact>\r\n                        <ErrorBoundary>\r\n                            <MainPage/>\r\n                        </ErrorBoundary>\r\n                    </Route>\r\n                    <Route path=\"/history\" >\r\n                        <HistoryPage/>\r\n                    </Route> \r\n                </Switch>\r\n        </Router>\r\n            \r\n    )\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\n\nimport reducer from './redux/reducer';\nimport { watchFetchData } from './redux/sagas';\n\nimport App from './components/app/';\nimport './index.css';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst store = createStore(reducer, applyMiddleware(sagaMiddleware));\n\nsagaMiddleware.run(watchFetchData);\n\nReactDOM.render(\n\t\t<Provider store={store}>\n\t\t\t<App />\n\t\t</Provider>,\n\tdocument.getElementById('root')\n);\n\n"],"sourceRoot":""}