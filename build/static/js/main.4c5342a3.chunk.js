(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{32:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(1),i=n(20),s=n.n(i),a=n(12),j=n(13),o=n(35),d=n(11),b=n(29),l="ADD_IMG_TO_HISTORY",O="DELETE_IMG_FROM_HISTORY",u="SET_ERROR",h="SET_LOADING",x={imgs:[],loading:!0,isError:!1},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case l:var n=[t.payload].concat(Object(b.a)(e.imgs));return console.log(n),Object(d.a)(Object(d.a)({},e),{},{imgs:n,loading:!1});case O:var c=Object(b.a)(e.imgs);return c.splice(t.payload,1),Object(d.a)(Object(d.a)({},e),{},{imgs:c,loading:!c.length});case u:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,isError:!0});case h:return Object(d.a)(Object(d.a)({},e),{},{loading:!0,isError:!1});default:return e}},f=n(19),v=n.n(f),p=n(14),m=v.a.mark(E),_=v.a.mark(y);function E(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p.b)({type:"SET_LOADING"});case 3:return t.next=5,Object(p.a)((function(){return fetch("https://api.giphy.com/v1/gifs/random?api_key=gR30u9O8KPOanwIQupHbD90d4k57EOeY")}));case 5:return e=t.sent,t.next=8,Object(p.a)((function(){return e.json()}));case 8:return e=t.sent,t.next=11,Object(p.b)({type:"ADD_IMG_TO_HISTORY",payload:{url:e.data.image_url,date:(new Date).toLocaleString(),id:e.data.id+1e5*Math.random().toFixed(5),title:e.data.title}});case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(0),t.next=17,Object(p.b)({type:"SET_ERROR",err:t.t0});case 17:case"end":return t.stop()}}),m,null,[[0,13]])}function y(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.c)("FETCH_IMG",E);case 2:case"end":return e.stop()}}),_)}var I=n(18),w=(n(46),function(){return Object(c.jsx)("nav",{className:"navBar",children:Object(c.jsxs)("div",{children:[Object(c.jsx)(I.b,{to:"/",children:"Main"}),Object(c.jsx)(I.b,{to:"/history",children:"History"})]})})}),T=n(6),R=(n(48),function(){return Object(c.jsx)("div",{className:"spinner__container",children:Object(c.jsx)("div",{class:"loadingio-spinner-spinner-hv9vq4k6slj",children:Object(c.jsxs)("div",{class:"ldio-zcrwtigbkw",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})})})}),S=(n(49),function(e){var t=e.img,n=e.withInfo?Object(c.jsxs)("div",{className:"info",children:[Object(c.jsxs)("div",{children:["Title: ",t.title||"no data"]}),Object(c.jsxs)("div",{children:["Loaded:",t.date]})]}):null;return Object(c.jsxs)("div",{children:[n,Object(c.jsx)("div",{className:"picture",children:Object(c.jsx)("img",{src:t.url,alt:""})})]})}),k=(n(32),Object(a.b)((function(e){return{img:e.imgs[0],loading:e.loading}}),(function(e){return{fetchImg:function(){return e({type:"FETCH_IMG"})}}}))((function(e){Object(r.useEffect)((function(){e.loading&&e.fetchImg()}),[]);var t=e.loading?Object(c.jsx)(R,{}):Object(c.jsx)(S,{img:e.img});return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"wrapper",children:t}),Object(c.jsx)("button",{onClick:function(){return e.fetchImg()},children:"Refresh"})]})}))),D=n(30),H=n(34),M=Object(a.b)((function(e){return{imgs:e.imgs}}),(function(e){return{delImgFromHistory:function(t){return e(function(e){return{type:"DELETE_IMG_FROM_HISTORY",payload:e}}(t))}}}))((function(e){var t=e.imgs,n=e.delImgFromHistory,i=Object(r.useState)(!0),s=Object(D.a)(i,2),a=s[0],j=s[1],o=Object(r.useState)(1),d=Object(D.a)(o,2),b=d[0],l=d[1],O=t.slice(0,5*b);if(!t.length)return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("div",{children:"History is empty, please return to main page."})});return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)(H.a,{dataLength:O.length,hasMore:a,next:function(){O.length!==t.length?l(b+1):j(!1)},children:O.map((function(e,t){return Object(c.jsxs)("div",{className:"img__container",children:[Object(c.jsx)(S,{withInfo:!0,img:e}),Object(c.jsx)("button",{onClick:function(){return n(t)},children:"Delete"})]},e.id)}))})})})),N=Object(a.b)((function(e){return{isError:e.isError}}))((function(e){return e.isError?Object(c.jsx)("div",{children:"Something went wrong..."}):Object(c.jsx)(c.Fragment,{children:e.children})})),F=function(){return Object(c.jsxs)(I.a,{children:[Object(c.jsx)(w,{}),Object(c.jsxs)(T.c,{children:[Object(c.jsx)(T.a,{path:"/history",children:Object(c.jsx)(M,{})}),Object(c.jsx)(T.a,{path:"/",children:Object(c.jsx)(N,{children:Object(c.jsx)(k,{})})})]})]})},G=(n(50),Object(o.a)()),L=Object(j.d)(g,Object(j.a)(G));G.run(y),s.a.render(Object(c.jsx)(a.a,{store:L,children:Object(c.jsx)(F,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.4c5342a3.chunk.js.map